<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>エアコンリモコン - Pythonチャレンジ（一体型レスポンシブ）</title>
    <style>
        /* === ページ全体の基本スタイル === */
        body {
            font-family: 'Hiragino Sans', sans-serif;
            background-color: #f0f0f5;
            margin: 0;
            overflow: hidden; /* スケーリングによるスクロールバーを防止 */
            text-align: center; /* ラッパーを中央寄せ */
        }

        /* === 全体を囲むスケーラブルなラッパー === */
        #scalable-wrapper {
            width: 1000px; /* デザインの基準となる幅 */
            display: inline-block;
            transform-origin: top center; /* 中央上部を基点に拡大・縮小 */
            box-sizing: border-box;
            margin-top: 20px; /* 上部に少し余白 */
        }

        /* === SVGとフォーム要素を重ねるためのコンテナ === */
        .container {
            position: relative;
        }
        .container svg {
            width: 100%;
            height: auto;
            display: block;
        }

        /* === SVGに重ねる要素のスタイル (修正箇所) === */
        #pythonCode {
            position: absolute;
            /* SVGの白い四角形の位置にパーセントで配置 */
            top: 7.7%; left: 0.1%; width: 34.6%; height: 15.5%; /* [修正] heightを正しい値に修正 */
            background: transparent; border: none; outline: none; resize: none;
            padding: 20px;
            font-family: monospace;
            font-size: 18px; /* 固定フォントサイズ */
            color: #333;
            box-sizing: border-box;
        }

        #checkCodeBtn {
            position: absolute;
            /* SVGの青いボタンの位置にパーセントで配置 */
            top: 29.6%; left: 0.15%; width: 34.6%; height: 10.7%; /* [修正] topを正しい値に修正 */
            background: transparent; border: none; cursor: pointer;
            color: white;
            font-family: 'Yu Gothic', sans-serif;
            font-weight: 700;
            font-size: 28px; /* 固定フォントサイズ */
        }

        #tempUp, #tempDown {
            cursor: pointer;
            transition: opacity 0.2s;
        }
        #tempUp:hover, #tempDown:hover {
            opacity: 0.7;
        }

        /* === フィードバックメッセージ === */
        #feedbackMessage {
            position: absolute;
            /* ボタンの下に配置 */
            top: 41%; left: 0.15%; width: 34.6%; /* [修正] ボタンと幅を合わせる */
            font-weight: bold;
            font-size: 16px;
            padding: 10px;
            border-radius: 4px;
            box-sizing: border-box;
            text-align: center;
            display: none; /* 初期状態は非表示 */
        }
        .correct {
            color: #155724; background-color: #d4edda; display: block !important;
        }
        .incorrect {
            color: #721c24; background-color: #f8d7da; display: block !important;
        }
    </style>
</head>
<body>
<div id="scalable-wrapper">
    <div class="container">
        <!-- 背景となるSVG画像 -->
        <svg width="3269" height="1702" xmlns="http://www.w3.org/2000/svg" viewBox="511 466 3269 1702">
            <g>
                <path d="M516.5 969.711C516.5 967.938 517.938 966.5 519.711 966.5L1646.29 966.5C1648.06 966.5 1649.5 967.938 1649.5 969.711L1649.5 1151.29C1649.5 1153.06 1648.06 1154.5 1646.29 1154.5L519.711 1154.5C517.938 1154.5 516.5 1153.06 516.5 1151.29Z" stroke="#007BFF" stroke-width="6.875" stroke-miterlimit="8" fill="#007BFF" fill-rule="evenodd"/>
                <path d="M2011.5 498.452C2011.5 482.462 2024.46 469.5 2040.45 469.5L3747.55 469.5C3763.54 469.5 3776.5 482.462 3776.5 498.452L3776.5 2135.55C3776.5 2151.54 3763.54 2164.5 3747.55 2164.5L2040.45 2164.5C2024.46 2164.5 2011.5 2151.54 2011.5 2135.55Z" stroke="#BFBFBF" stroke-width="6.875" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/>
                <rect x="2150.5" y="639.5" width="1456" height="699" stroke="#BCD5DA" stroke-width="6.875" stroke-miterlimit="8" fill="#BCD5DA"/>
                <path id="tempUp" d="M2817.5 1570.5 2897.5 1473.5 2977.5 1570.5Z" stroke="#7F7F7F" stroke-width="6.875" stroke-miterlimit="8" fill="#7F7F7F" fill-rule="evenodd"/>
                <path d="M2626.5 1397.5 2626.5 2126.28" stroke="#7F7F7F" stroke-width="6.875" stroke-miterlimit="8" fill="none" fill-rule="evenodd"/>
                <path d="M3154.5 1397.5 3154.5 2126.28" stroke="#7F7F7F" stroke-width="6.875" stroke-miterlimit="8" fill="none" fill-rule="evenodd"/>
                <path d="M2150.5 1629.5 3641.29 1629.5" stroke="#7F7F7F" stroke-width="6.875" stroke-miterlimit="8" fill="none" fill-rule="evenodd"/>
                <path d="M2150.5 1872.5 3641.29 1872.5" stroke="#7F7F7F" stroke-width="6.875" stroke-miterlimit="8" fill="none" fill-rule="evenodd"/>
                <path id="tempDown" d="M2817.5 1950.5 2897.5 2048.5 2977.5 1950.5Z" stroke="#7F7F7F" stroke-width="6.875" stroke-miterlimit="8" fill="#7F7F7F" fill-rule="evenodd"/>
                <path d="M2676.5 726.5 2676.5 1274.44" stroke="#002060" stroke-width="6.875" stroke-miterlimit="8" fill="none" fill-rule="evenodd"/>
                <text fill="#002060" font-family="Yu Gothic,Yu Gothic_MSFontService,sans-serif" font-weight="700" font-size="165" transform="matrix(1 0 0 1 2233 1086)">冷房</text>
                <text id="temperatureDisplay" fill="#002060" font-family="Yu Gothic,Yu Gothic_MSFontService,sans-serif" font-weight="400" font-size="367" transform="matrix(1 0 0 1 2866.1 1145)">26</text>
                <text fill="#002060" font-family="Yu Gothic,Yu Gothic_MSFontService,sans-serif" font-weight="400" font-size="92" transform="matrix(1 0 0 1 3274.02 1145)">℃</text>
                <path d="M514.5 597.164C514.5 594.588 516.588 592.5 519.164 592.5L1644.84 592.5C1647.41 592.5 1649.5 594.588 1649.5 597.164L1649.5 860.837C1649.5 863.412 1647.41 865.5 1644.84 865.5L519.164 865.5C516.588 865.5 514.5 863.412 514.5 860.837Z" stroke="#BFBFBF" stroke-width="6.875" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/>
            </g>
        </svg>

        <!-- SVGに重ねるHTML要素 -->
        <textarea id="pythonCode" placeholder="ここにPythonコードを入力..."></textarea>
        <button id="checkCodeBtn">実行</button>
        <p id="feedbackMessage"></p>
    </div>
</div>

<script>
    // === エアコンリモコンのロジック ===
    document.addEventListener('DOMContentLoaded', () => {
        let temperature = 26;
        let isRemoteUnlocked = false;
        const correctPythonCode = `
            temperature = 26
            change = int(input("上げたい温度を入力:"))
            print(temperature + change)
        `;

        const temperatureDisplay = document.getElementById('temperatureDisplay');
        const tempUpButton = document.getElementById('tempUp');
        const tempDownButton = document.getElementById('tempDown');
        const pythonCodeInput = document.getElementById('pythonCode');
        const checkCodeBtn = document.getElementById('checkCodeBtn');
        const feedbackMessage = document.getElementById('feedbackMessage');
        
        const updateDisplay = () => { temperatureDisplay.textContent = temperature; };
        const normalizeCode = (code) => code.replace(/input\s*\([^)]*\)/g, "input()").replace(/\s/g, '');

        checkCodeBtn.addEventListener('click', () => {
            const userCode = pythonCodeInput.value;
            if (normalizeCode(userCode) === normalizeCode(correctPythonCode)) {
                feedbackMessage.textContent = "正解！リモコン操作ができます。";
                feedbackMessage.className = 'correct';
                isRemoteUnlocked = true;
            } else {
                feedbackMessage.textContent = "不正解です。コードを見直してください。";
                feedbackMessage.className = 'incorrect';
                isRemoteUnlocked = false;
            }
        });

        tempUpButton.addEventListener('click', () => { if (isRemoteUnlocked) { temperature++; updateDisplay(); } });
        tempDownButton.addEventListener('click', () => { if (isRemoteUnlocked) { temperature--; updateDisplay(); } });

        updateDisplay();
    });

    // === 画面全体をスケーリングする処理 (修正箇所) ===
    function scaleViewport() {
        const wrapper = document.getElementById('scalable-wrapper');
        if (!wrapper) return;
        const designWidth = 1000; // [修正] CSSで設定した基準幅(1000px)に修正
        const windowWidth = window.innerWidth;
        const scale = windowWidth / designWidth;
        wrapper.style.transform = `scale(${scale})`;
        // スケーリング後の高さをbodyに設定し、不要なスクロールバーを防ぐ
        document.body.style.height = `${wrapper.getBoundingClientRect().height}px`;
    }

    window.addEventListener('load', scaleViewport);
    window.addEventListener('resize', scaleViewport);
</script>
</body>
</html>
